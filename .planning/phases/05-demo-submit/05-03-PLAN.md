---
phase: 05-demo-submit
plan: 03
type: execute
wave: 3
depends_on: ["05-02"]
files_modified:
  - README.md
  - docs/policies.md
  - docs/architecture.md
  - demo/recording_checklist.md
  - demo/video.mp4
autonomous: false

must_haves:
  truths:
    - "README explains setup, running Sentinel, and demo"
    - "Policy examples are documented"
    - "A 2-minute demo video exists at demo/video.mp4"
    - "A recording checklist exists to reproduce the recorded demo"
  artifacts:
    - path: "README.md"
      provides: "Project overview + quickstart"
    - path: "docs/policies.md"
      provides: "Policy reference + examples"
    - path: "docs/architecture.md"
      provides: "Architecture overview"
    - path: "demo/recording_checklist.md"
      provides: "Recording checklist"
    - path: "demo/video.mp4"
      provides: "2-minute before/after demo recording"
  key_links:
    - from: "README.md"
      to: "demo/run_before_after.sh"
      via: "demo instructions"
      pattern: "run_before_after\\.sh"
---

<objective>
Finalize submission artifacts: documentation and a 2-minute demo video.

Purpose: Make the project easy to judge and reproduce.
Output: README + docs + recording checklist + demo/video.mp4.
</objective>

<execution_context>
@/home/ubuntu/.config/opencode/get-shit-done/workflows/execute-plan.md
@/home/ubuntu/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md
@.planning/phases/05-demo-submit/05-02-PLAN.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Write README + docs for policies and architecture</name>
  <files>
README.md
docs/policies.md
docs/architecture.md
  </files>
  <action>
Write minimal but complete docs:
- README: what it is, why it matters, quickstart (docker compose + create key + run serve), demo instructions (run script), and screenshots/terminal snippets (optional).
- `docs/policies.md`: schema reference + example policies (deny-by-default, admin-only, rate limit).
- `docs/architecture.md`: diagram-level explanation (Sentinel as MCP server to clients + MCP client to upstream; Redis/Postgres roles).
  </action>
  <verify>rg -n "Quickstart|Policy|Demo" README.md docs/policies.md docs/architecture.md && rg -n "bash demo/run_before_after\\.sh" README.md && rg -n '```yaml' docs/policies.md && rg -n 'roles:' docs/policies.md && rg -n 'rate_limits:' docs/policies.md && rg -n 'SENTINEL_POLICY_PATH|demo/policies_demo\.yaml' README.md docs/policies.md && bash demo/run_before_after.sh</verify>
  <done>Docs are sufficient for a judge to run the demo without reading code.</done>
</task>

<task type="auto">
  <name>Task 2: Add demo recording checklist (pre-flight)</name>
  <files>demo/recording_checklist.md</files>
  <action>
Create `demo/recording_checklist.md`:
- Pre-flight checks (Docker running, ports free, env vars set, sample scripts available)
- Exact commands to run in order: `bash demo/run_before_after.sh`
- What the recording must show (before vs after; 401/403/429; successful authorized call; audit evidence)
- Export requirements: MP4, target ~2:00, file path `demo/video.mp4`
  </action>
  <verify>test -f demo/recording_checklist.md && rg -n "demo/video\.mp4|run_before_after\.sh" demo/recording_checklist.md</verify>
  <done>Recording checklist exists and references the demo runner.</done>
</task>

<task type="checkpoint:human-action" gate="blocking">
  <what-built>Docs + demo runner instructions + recording checklist</what-built>
  <how-to-verify>
1) Follow `demo/recording_checklist.md` and record the before/after demo.
2) Export the recording to `demo/video.mp4` (H.264 MP4 preferred).
3) Target duration: ~120 seconds (+/- 10 seconds).
4) Play back the file locally to confirm audio and terminal text are readable.
  </how-to-verify>
  <resume-signal>Type "video recorded" once `demo/video.mp4` exists</resume-signal>
</task>

</tasks>

<verification>
- Docs include the exact demo command and the demo runner still works: `bash demo/run_before_after.sh`
- Video artifact exists: `test -f demo/video.mp4`
- Optional duration sanity (if ffprobe available): `command -v ffprobe >/dev/null && ffprobe -v error -show_entries format=duration -of default=noprint_wrappers=1:nokey=1 demo/video.mp4`
</verification>

<success_criteria>
- Submission docs are complete.
- `demo/video.mp4` exists and is ~2 minutes.
</success_criteria>

<output>
After completion, create `.planning/phases/05-demo-submit/05-03-SUMMARY.md`
</output>
